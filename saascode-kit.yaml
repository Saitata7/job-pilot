# SaasCode Kit — Manifest
# Jobs Pilot: Local-first AI Job Assistant Chrome Extension

project:
  name: "Jobs Pilot"
  description: "Local-first AI Job Assistant Chrome extension that automates and optimizes the job application process while keeping all data private on the user's machine"
  type: "single-tenant"
  domain: "chrome-extension"
  port: 5173                            # Vite dev server port

# Tech Stack
stack:
  frontend:
    framework: "react"
    version: "18"
    ui_library: "custom"
    css: "tailwind"
    state: "zustand"

  backend:
    framework: "chrome-service-worker"   # Chrome Extension Manifest V3 background service worker
    version: "3"
    orm: "none"
    database: "indexeddb"                # IndexedDB via idb package + Chrome Storage API
    cache: "none"
    queue: "none"

  language: "typescript"

# Authentication
auth:
  provider: "none"                       # Local-first, no server-side auth
  multi_tenant: false
  roles: []
  guard_pattern: "none"
  session: "none"

# Billing
billing:
  enabled: false
  provider: "none"
  model: "none"
  webhooks: false

# Multi-Tenancy
tenancy:
  enabled: false
  isolation: "none"
  identifier: "none"
  context_source: "none"

# AI Features
ai:
  enabled: true
  providers:
    - "openai"
    - "groq"
    - "ollama"
  features:
    - "analysis"                         # JD analysis, resume scoring
    - "generation"                       # Resume optimization, cover letters
    - "search"                           # Keyword extraction, ATS matching
  vector_db: "none"
  streaming: false
  structured_output: true                # Uses JSON mode for structured AI responses
  cost_tracking: false
  guardrails: false

# Third-Party Integrations
integrations:
  - name: "chrome-storage"
    type: "persistence"
    has_webhooks: false
  - name: "indexeddb"
    type: "persistence"
    has_webhooks: false
  - name: "jspdf"
    type: "document-generation"
    has_webhooks: false
  - name: "docx"
    type: "document-generation"
    has_webhooks: false

# Infrastructure
infra:
  frontend_host: "chrome-extension"      # Distributed via Chrome Web Store
  backend_host: "local"                  # Runs entirely in the browser
  ci_provider: "github"

# Security Requirements
security:
  owasp_web: true
  owasp_llm: true                        # AI features enabled
  compliance: []
  secret_scanning: true
  dependency_scanning: true

# Code Review Automation
review:
  pre_commit: true
  pre_push: false
  ci_on_pr: true
  auto_comment_pr: true

# Project Structure Paths
paths:
  frontend: "src/options"                # React settings/options pages
  backend: "src/background"              # Chrome service worker (message routing, AI calls)
  shared: "src/shared"                   # Shared types, constants, utilities
  schema: "src/storage/schemas"          # IndexedDB schemas
  api_client: "src/ai"                   # AI provider abstraction (Ollama, OpenAI, Groq)
  components: "src/options/components"   # React UI components

# Custom Patterns (project-specific things AI should know)
patterns:
  critical:
    - id: "message-routing"
      description: "All content-to-background communication must go through typed message passing"
      correct: "chrome.runtime.sendMessage({ type: 'ACTION_TYPE', payload }) with handler in message-handler.ts"
      wrong: "Direct function calls between content scripts and background — violates Chrome extension architecture"

    - id: "ai-json-parsing"
      description: "All AI responses must use safe JSON extraction"
      correct: "extractJSONFromResponse(response.content) from src/shared/utils/json-utils.ts"
      wrong: "JSON.parse(response) — AI responses often contain markdown or extra text"

    - id: "ai-fallback"
      description: "Every AI call must have a fallback when AI fails"
      correct: "try { aiResult } catch { fallbackResult } — always degrade gracefully"
      wrong: "Letting AI failures crash the feature without fallback"

    - id: "storage-error-handling"
      description: "Chrome storage operations must handle context invalidation"
      correct: "try { await chrome.storage.local.get(KEY) } catch { return defaultValue }"
      wrong: "Unguarded chrome.storage calls — fail after extension reload"

    - id: "resume-optimization"
      description: "Resume optimization follows hiring-manager mindset, not keyword stuffing"
      correct: "Strategic 3-step process: Deep JD Analysis → Summary Rewriting → Bullet Enhancement"
      wrong: "Keyword matching or mechanical skill insertion"

  anti_patterns:
    - "Never use dynamic import() in service workers — breaks Chrome extension build"
    - "Never stuff keywords into resumes — use strategic positioning instead"
    - "Never invent metrics in bullet points — describe complexity instead"
    - "Never skip fallback handling for AI service calls"
    - "Never use innerHTML with scraped job page content — XSS risk"
    - "Never hardcode API keys — use Chrome storage settings"

  colors:
    primary_ui: "primary-*"              # Blue shades for main UI
    success: "green-*"
    warning: "amber-*"
    danger: "red-*"
